language: android
before_install: #1.1
- nvm install 6
- node --version
install: #1.2
- npm install
go:
  - 1.12.x
env:
  - GO111MODULE=on
android: #1.3
  components:
  - build-tools-23.0.1
  - android-23
  - extra-android-m2repository
  - extra-google-google_play_services
  - extra-google-m2repository
  - addon-google_apis-google-16
script: 
- cd android/p2mobile && make
- npm run ci #2
- cd android && ./gradlew assembleRelease #3
deploy: # mostly generated by `> travis deploy releases`
  skip_cleanup: true
  provider: releases
  api_key:
    secure: eINKsdeSn9xXJR5JpBJqiap+Hkrc1pYh9D8IT5lDYwdWjRk1d/mF1TuKI/LazeeZ0HbVH9ep2AeDfco5F3Jp2A8r7kAycS5xiVJMfmr2D8ze+oCMiDw8iHgdY29++m4kh4r0QvCags08HlPEcOBOg1K12zrM6dacdSlUed/Vx6KMZJsb54vs7BJQ0BIsjC21XlUL9EoJZsp8fJfpLZ9gmoJHGSdJO3CXdiWpvf+WGmWRXGmqaLnfmZeD/eSAM+iaurehyNAkJFjsadeh+/pRTjauoMdNmnha+NSRwMABw5DjUz7Aaat4CXBUhsON3eyYPX1LhuLNCe3w6rNtgQrp03CSATC572MBkZyq9gesVbTAs8Ggkryg175TwiTvN/FlWk/s9ggwrqrtbwIO3pj1dbqgv+HyR9OR33xDIffrDxniuR2nS2O8Vxn/nun/OxrGFhB7iln3P2MWrl/4eobKgaxhcSbERQXdn5MFRiYjdc4FHkns870/cEQBaqW1iQwrf1e07/5KAIlyYW5Ts8abuu9UU7kFbt7EdL5mDmTeJKc69Bw7ir/BsFlHvVux9YhsRHMtYkuhkX5+aE7LKeNjEZIXUMnt47Ov80ilZpyQBm5PhAm0yvWcLAd2ghgtSL38AOoyyfzsktjh5cPItWIKeUnrU2OZCFs42h0/PDDBoYg=
  file: $TRAVIS_BUILD_DIR/android/app/build/outputs/apk/app-release-unsigned.apk
  on:
    repo: MoonSHRD/app-builds
    tags: false
